<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>帮助文档</title>

</head>
<body>
<div>
    <p ><b>接口信息</b></p><br>
    --------------------------------------------------------------------------<br>
    0.结果响应码<br>
    http://192.168.1.124:8002/resultCode/<br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    1.登陆接口<br>
    调用者：病人、医生<br>
    http://192.168.1.124:8002/login/<br>
    提交方式：post<br>
    参数名称   username = 电话号码 ， password = 密码,userType=用户类型('doctor','patient') <br>
    返回结果  resultcode 详情参照  http://192.168.1.124:8002/resultCode/<br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    2.短信验证接口<br>
    调用者：病人、医生<br>
    http://192.168.1.124:8002/sendSmscode/tel=[phoneNUM]<br>
    提交方式：get<br>
    参数名称   tel = 电话号码 <br>
    返回结果  None<br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    3.用户注册接口<br>
    调用者：病人、医生<br>
    http://192.168.1.124:8002/register/<br>
    提交方式：post<br>
    参数名称   tel= 电话号码，password= 密码 ， smscode= 短信验证码，userType=用户类型('doctor','patient') <br>
    返回结果  resultcode 详情参照  http://192.168.1.124:8002/resultCode/<br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    4.返回病人个人信息接口<br>
    调用者：病人<br>
    http://192.168.1.124:8002/patientInfo/tel=[phoneNUM]<br>
    提交方式：get<br>
    返回结果  200107 查无此人<br>
    返回结果  成功则返回  个人信息json<br>
    resultcode 详情参照  http://192.168.1.124:8002/resultCode/<br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    5.返回医生个人信息接口 （2016-1-18）<br>
    调用者：医生<br>
    http://192.168.1.124:8002/doctorInfo/tel=[phoneNUM]<br>
    提交方式：get<br>
    返回结果  200107 查无此人<br>
    返回结果  成功则返回  个人信息json<br>
    resultcode 详情参照  http://192.168.1.124:8002/resultCode/<br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    6.病人资料完善接口<br>
    调用者：病人<br>
    http://192.168.1.124:8002/updataPatient/<br>
    提交方式：post<br>
    参数名称   tel  =病人电话<br>
    参数名称   pic  =病人头像 （默认=None）<br>
    参数名称   name  =病人姓名<br>
    参数名称   gender  =病人性别<br>
    参数名称   age  =病人年龄<br>
    参数名称   medical_history  =病历 （默认不填）<br>
    参数名称   collection_list_id  =收藏集合（默认不填）<br>
    返回结果  200200 表示返回成功 <br>
    详情参照  http://192.168.1.124:8002/resultCode/<br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    7.医生资料完善接口<br>
    调用者：医生<br>
    http://192.168.1.124:8002/updataDoctor/<br>
    提交方式：post<br>
    参数名称   tel  =医生电话<br>
    参数名称   age =医生年龄<br>
    参数名称   pic =头像<br>
    参数名称   name =姓名<br>
    参数名称   gender =性别<br>
    参数名称   ndividual_resume =简历<br>
    参数名称   comment_count =评论次数,default=0)<br>
    参数名称   grade =评分等级,default=4)<br>
    参数名称   adept =擅长领域,default=None)<br>
    参数名称   treatment_count =行医次数,default=0)<br>
    参数名称   qualification_pic =资格证照片,default=None)<br>
    参数名称   identification_pic =身份证照片,default=None)<br>
    参数名称   hospital =医院地址,default=None)<br>
    参数名称   current_task_count =当前医生已接任务数,default=0)<br>
    返回结果  resultcode 详情参照  http://192.168.1.124:8002/resultCode/<br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    8.找回密码<br>
    调用者：病人、医生<br>
    http://192.168.1.124:8002/findUserPassword/<br>
    提交方式：post<br>
    参数名称   userType=用户类型('doctor','patient')
    参数名称   tel = 电话号码
    参数名称   password = 密码
    参数名称   smsCode = 短信验证码
    返回结果  10010 修改密码成功<br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    9.检查病人当前是否有任务发布接口<br>
    调用者：病人<br>
    http://192.168.1.124:8002/queryTask/tel=病人电话<br>
    提交方式：get<br>
    返回结果  10004  当前没有发布任何任务，可以发布新任务。<br>
    返回结果  expirationTime=-1 task=["channel_hash_detailTask_13887083253_1452582118"]<br>
              expirationTime=过期时间 -1表示无过期时间 task=任务的详细实体<br>
    PS： 首先使用“空格” 拆分返回结果， 得到“过期时间”和“任务实体”，再根据“=”拆分获取详细数据<br>
    resultcode 详情参照  http://192.168.1.124:8002/resultCode/<br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    10.发布任务接口<br>
    调用者：病人<br>
    http://192.168.1.124:8002/addTask/<br>
    提交方式：post<br>
    参数名称：<br>
        symptom = 症状简介<br>
        type= 为谁求医 ,default='0'( 0 表示为自己提交任务)<br>
        lat= 病人精度<br>
        lon= 病人纬度<br>
        patient_name=病人名字<br>
        patient_tel=病人电话<br>
        user_tel=任务人电话号码(只有在type=1 时候填写)<br>
        user_addr=任务人的地址(只有在type=1 时候填写)<br>
        patient_age= 病人年龄<br>
        patient_gender=病人性别<br>
    返回结果  10002  发布成功，同时返回任务ID， 请注意保存
    resultcode 详情参照  http://192.168.1.124:8002/resultCode/<br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    11.删除任务接口<br>
    调用者：病人<br>
    http://192.168.1.124:8002/deleteTask/id=[detailTaskID]<br>
    提交方式：get<br>
    返回结果  10009  删除成功<br>

    resultcode 详情参照  http://192.168.1.124:8002/resultCode/<br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    12.修改任务接口<br>
    调用者：病人<br>
    http://192.168.1.124:8002/editTask/<br>
    提交方式：post<br>
    参数名称：<br>
        symptom = 症状简介<br>
        type= 为谁求医 ,default='0'( 0 表示为自己提交任务)<br>
        lat= 病人精度<br>
        lon= 病人纬度<br>
        patient_name=病人名字<br>
        patient_tel=病人电话<br>
        user_tel=任务人电话号码(只有在type=1 时候填写)<br>
        user_addr=任务人的地址(只有在type=1 时候填写)<br>
        patient_age= 病人年龄<br>
        patient_gender=病人性别<br>
    返回结果  10006  发布成功

    resultcode 详情参照  http://192.168.1.124:8002/resultCode/<br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    13.获取当前通道所有任务接口<br>
    调用者：医生<br>
    http://192.168.1.124:8002/queryAllTaskHandler/<br>
    提交方式：get<br>
    参数名称   无<br>
    返回结果  所有任务的JSON串<br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    14.根据医生电话， 查询已接任务（2016-1-18）<br>
    调用者：医生<br>
    http://192.168.1.124:8002/queryAcceptTaskByTel/tel=(.*)<br>
    提交方式：get<br>
    参数名称   无<br>
    返回结果  所有任务id的JSON串<br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    15.根据ID 查任务的响应医生接口<br>
    调用者：病人<br>
    http://192.168.1.124:8002/queryTaskDoctorsById/id=[detailTaskID]<br>
    提交方式：get<br>
    返回结果  所有接受任务医生实体的JSON串<br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    16.根据任务ID 查任务详细信息接口（2016-1-20 16:15）<br>
    调用者：病人，医生<br>
    http://192.168.1.124:8002/queryTaskInfoById/id=[detailTaskID]<br>
    提交方式：get<br>
    返回结果  任务实体的JSON串<br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    17.接受任务接口<br>
    调用者：医生<br>
    http://192.168.1.124:8002/acceptTask/<br>
    提交方式：post<br>
    参数名称   id= 任务ID<br>
    参数名称   doctor_tel= 医生电话<br>
    参数名称   patient_tel= 病人电话<br>
    参数名称   task_timeout= 超时时间  默认30分<br>
    返回结果  10008 任务接受成功<br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    18.删除响应医生接口<br>
    调用者：病人<br>
    http://192.168.1.124:8002/deleteAcceptedDoctor/<br>
    提交方式：post<br>
    参数名称   id= 任务ID<br>
    参数名称   doctor_tel= 医生电话<br>
    返回结果  10011 删除响应医生成功<br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    19.接受医生接口<br>
    调用者：病人<br>
    http://192.168.1.124:8002/acceptDoctor/<br>
    提交方式：post<br>
    参数名称   id= 任务ID<br>
    参数名称   doctor_tel= 医生电话<br>
    返回结果  10005 接受医生成功<br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    20.医生确定为病人看病接口（2016-1-19 20:16）<br>
    调用者：医生<br>
    http://192.168.1.124:8002/confirmTask/<br>
    提交方式：post<br>
    参数名称   id= 任务ID<br>
    参数名称   doctor_tel= 医生电话<br>
    参数名称   patient= 病人电话<br>
    返回结果  10013 接受医生成功<br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    21.医生取消为此病人看病接口（2016-1-19 20:29）<br>
    调用者：医生<br>
    http://192.168.1.124:8002/cancelTask/<br>
    提交方式：post<br>
    参数名称   id= 任务ID<br>
    参数名称   patient= 病人电话<br>
    返回结果  10014 医生取消任务完成<br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    22.病人发送私信给医生接口（2016-1-22 13:32）<br>
    调用者：病人<br>
    http://192.168.1.124:8002/sendPrivateLetter/<br>
    提交方式：post<br>
    参数名称：<br>
        doctor_tel = 医生电话<br>
        symptom = 症状简介<br>
        type= 为谁求医 ,default='0'( 0 表示为自己提交任务)<br>
        lat= 病人精度<br>
        lon= 病人纬度<br>
        patient_name=病人名字<br>
        patient_tel=病人电话<br>
        user_tel=任务人电话号码(只有在type=1 时候填写)<br>
        user_addr=任务人的地址(只有在type=1 时候填写)<br>
        patient_age= 病人年龄<br>
        patient_gender=病人性别<br>
    返回结果 10102 私信发送成功 <br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    23.接受私信接口（2016-1-22 14:13）<br>
    调用者：医生<br>
    http://192.168.1.124:8002/acceptPrivateLetter/<br>
    提交方式：post<br>
    参数名称   id= 私信ID<br>
    参数名称   doctor_tel= 医生电话<br>
    参数名称   patient_tel= 病人电话<br>
    返回结果 10104 私信接受成功 <br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    24.# 医生确定接受私信接口（2016-1-22 13:32）<br>
    调用者：医生<br>
    http://192.168.1.124:8002/confirmPrivateLetter/<br>
    提交方式：post<br>
    参数名称   id= 私信ID<br>
    参数名称   doctor_tel= 医生电话<br>
    参数名称   patient_tel= 病人电话<br>
    返回结果 10105 私信确定成功 <br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    25. 医生取消私信接口（2016-1-22 13:32）<br>
    调用者：医生<br>
    http://192.168.1.124:8002/cancelTaskPrivateLetter/<br>
    提交方式：post<br>
    参数名称   id= 私信ID<br>
    参数名称   patient_tel= 病人电话<br>
    参数名称   doctor_tel= 医生电话<br>
    返回结果 10103 私信取消成功 <br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    26. 医生 或 病人 请求自己私信列表（2016-1-22 13:32）<br>
    调用者：医生,病人<br>
    http://192.168.1.124:8002/queryDoctorPrivateLetterList/<br>
    提交方式：post<br>
    参数名称   userType=用户类型 'plase confirm userType "doctor"or"patient"<br>
    参数名称   tel= 电话<br>
    返回结果 私信实体列表 <br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    **.连接TCP服务器<br>
    http://192.168.1.124:9081/<br>
    提交方式：使用socket 连接服务器的ip和端口<br>
    连接服务器收到  doctor:::15012822291:::msg  这样的格式的信息<br>
    连接服务器收到  patient:::15012822291:::msg  这样的格式的信息<br>
    返回结果  ...succeed... 表示和服务器连接成功<br>
    --------------------------------------------------------------------------<br>
    ------------------------------服务端接口----------------------------------<br>
    1.向客户端推送信息<br>
    http://192.168.1.124:9080/<br>
    提交方式：POST<br>
    参数名称   what=['addTask'|'acceptTask'|'acceptDoctor']<br>
    参数名称   tel=[电话号码]<br>
    参数名称   data=[具体信息内容]<br>
    返回结果  ...Please specify the event type...(what ="addTask" or what = "acceptTask")<br>
    返回结果  ...succeed...<br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    2. 医生取消私信接口（2016-1-22 13:32）<br>
    调用者：医生<br>
    http://192.168.1.124:8002/getDoctorIfonline/<br>
    提交方式：get<br>
    返回结果 所有在线医生实体 <br>
    --------------------------------------------------------------------------<br>
</div>
</body>
</html>