<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>帮助文档</title>

</head>
<body>
<div>
    <p ><b>接口信息</b></p><br>
    --------------------------------------------------------------------------<br>
    0.结果响应码<br>
    http://192.168.1.124:8002/resultCode/<br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    1.登陆接口<br>
    调用者：病人、医生<br>
    http://192.168.1.124:8002/login/<br>
    提交方式：post<br>
    参数名称   username = 电话号码 ， password = 密码,userType=用户类型('doctor','patient') <br>
    返回结果  resultcode 详情参照  http://192.168.1.124:8002/resultCode/<br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    2.短信验证接口<br>
    调用者：病人、医生<br>
    http://192.168.1.124:8002/sendSmscode/tel=[phoneNUM]<br>
    提交方式：get<br>
    参数名称   tel = 电话号码 <br>
    返回结果  None<br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    3.用户注册接口<br>
    调用者：病人、医生<br>
    http://192.168.1.124:8002/register/<br>
    提交方式：post<br>
    参数名称   tel= 电话号码，password= 密码 ， smscode= 短信验证码，userType=用户类型('doctor','patient') <br>
    返回结果  resultcode 详情参照  http://192.168.1.124:8002/resultCode/<br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    4.返回病人个人信息接口<br>
    调用者：病人<br>
    http://192.168.1.124:8002/patientInfo/tel=[phoneNUM]<br>
    提交方式：get<br>
    返回结果  200107 查无此人<br>
    返回结果  成功则返回  个人信息json<br>
    resultcode 详情参照  http://192.168.1.124:8002/resultCode/<br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    5.病人资料完善接口<br>
    调用者：病人<br>
    http://192.168.1.124:8002/updataPatient/<br>
    提交方式：post<br>
    参数名称   tel  =病人电话<br>
    参数名称   pic  =病人头像 （默认=None）<br>
    参数名称   name  =病人姓名<br>
    参数名称   gender  =病人性别<br>
    参数名称   age  =病人年龄<br>
    参数名称   medical_history  =病历 （默认不填）<br>
    参数名称   collection_list_id  =收藏集合（默认不填）<br>
    返回结果  resultcode 详情参照  http://192.168.1.124:8002/resultCode/<br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    6.找回密码<br>
    调用者：病人、医生<br>
    http://192.168.1.124:8002/findUserPassword/<br>
    提交方式：post<br>
    参数名称   userType=用户类型('doctor','patient')
    参数名称   tel = 电话号码
    参数名称   password = 密码
    参数名称   smsCode = 短信验证码
    返回结果  10010 修改密码成功<br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    6.检查病人当前是否有任务发布接口<br>
    调用者：病人<br>
    http://192.168.1.124:8002/queryTask/tel=病人电话<br>
    提交方式：get<br>
    返回结果  10004  当前没有发布任何任务，可以发布新任务。<br>
    返回结果  expirationTime=-1 task=["channel_hash_detailTask_13887083253_1452582118"]<br>
              expirationTime=过期时间 -1表示无过期时间 task=任务的详细实体<br>
    PS： 首先使用“空格” 拆分返回结果， 得到“过期时间”和“任务实体”，再根据“=”拆分获取详细数据<br>
    resultcode 详情参照  http://192.168.1.124:8002/resultCode/<br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    7.发布任务接口<br>
    调用者：病人<br>
    http://192.168.1.124:8002/addTask/<br>
    提交方式：post<br>
    参数名称：<br>
        symptom = 症状简介<br>
        type= 为谁求医 ,default='0'( 0 表示为自己提交任务)<br>
        lat= 病人精度<br>
        lon= 病人纬度<br>
        patient_name=病人名字<br>
        patient_tel=病人电话<br>
        user_tel=任务人电话号码(只有在type=1 时候填写)<br>
        user_addr=任务人的地址(只有在type=1 时候填写)<br>
        patient_age= 病人年龄<br>
        patient_gender=病人性别<br>
    返回结果  10002  发布成功，同时返回任务ID， 请注意保存
    resultcode 详情参照  http://192.168.1.124:8002/resultCode/<br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    8.删除任务接口<br>
    调用者：病人<br>
    http://192.168.1.124:8002/deleteTask/id=[detailTaskID]<br>
    提交方式：get<br>
    返回结果  10009  删除成功<br>

    resultcode 详情参照  http://192.168.1.124:8002/resultCode/<br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    9.修改任务接口<br>
    调用者：病人<br>
    http://192.168.1.124:8002/editTask/<br>
    提交方式：post<br>
    参数名称：<br>
        symptom = 症状简介<br>
        type= 为谁求医 ,default='0'( 0 表示为自己提交任务)<br>
        lat= 病人精度<br>
        lon= 病人纬度<br>
        patient_name=病人名字<br>
        patient_tel=病人电话<br>
        user_tel=任务人电话号码(只有在type=1 时候填写)<br>
        user_addr=任务人的地址(只有在type=1 时候填写)<br>
        patient_age= 病人年龄<br>
        patient_gender=病人性别<br>
    返回结果  10006  发布成功

    resultcode 详情参照  http://192.168.1.124:8002/resultCode/<br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    10.获取当前通道所有任务接口<br>
    调用者：医生<br>
    http://192.168.1.124:8002/queryAllTaskHandler/<br>
    提交方式：get<br>
    参数名称   无<br>
    返回结果  所有任务的JSON串<br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    11.根据ID 查任务的响应医生接口<br>
    调用者：病人<br>
    http://192.168.1.124:8002/queryTaskDoctorsById/id=[detailTaskID]<br>
    提交方式：get<br>
    返回结果  所有接受任务医生实体的JSON串<br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    11.接受任务接口<br>
    调用者：医生<br>
    http://192.168.1.124:8002/acceptTask/<br>
    提交方式：post<br>
    参数名称   id= 任务ID<br>
    参数名称   doctor_tel= 医生电话<br>
    参数名称   patient_tel= 病人电话<br>
    参数名称   task_timeout= 超时时间  默认30分<br>
    返回结果  10008 任务接受成功<br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    12.接受医生接口<br>
    调用者：病人<br>
    http://192.168.1.124:8002/acceptDoctor/<br>
    提交方式：post<br>
    参数名称   id= 任务ID<br>
    参数名称   doctor_tel= 医生电话<br>
    返回结果  10005 接受医生成功<br>
    --------------------------------------------------------------------------<br>
    --------------------------------------------------------------------------<br>
    13.连接TCP服务器<br>
    http://192.168.1.124:9081/<br>
    提交方式：使用socket 连接服务器的ip和端口<br>
    连接服务器收到  doctor:::15012822291:::msg  这样的格式的信息<br>
    连接服务器收到  patient:::15012822291:::msg  这样的格式的信息<br>
    返回结果  10005 接受医生成功<br>
    --------------------------------------------------------------------------<br>
    ------------------------------服务端接口----------------------------------<br>
    1.向客户端推送信息<br>
    http://192.168.1.124:9080/<br>
    提交方式：POST<br>
    参数名称   what=['addTask'|'acceptTask'|'acceptDoctor']<br>
    参数名称   tel=[电话号码]<br>
    参数名称   data=[具体信息内容]<br>
    返回结果  ...Please specify the event type...(what ="addTask" or what = "acceptTask")<br>
    返回结果  ...succeed...<br>
    --------------------------------------------------------------------------<br>
</div>
</body>
</html>